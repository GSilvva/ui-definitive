const events=["DOMContentLoaded","scroll","load"];events.forEach(e=>{window.addEventListener(e,()=>{document.querySelectorAll("[data-animate]").forEach(e=>{let t;e.getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)/1.1&&e.classList.add("active")})})});const nav=document.querySelector(".nav");events.forEach(e=>{window.addEventListener(e,()=>{document.body.scrollTop>24||document.documentElement.scrollTop>24?nav.classList.add("fixed"):nav.classList.remove("fixed")})});const buttons=document.querySelectorAll("[data-form]"),modal=document.querySelector(".modal");buttons.forEach(e=>{let t=e.querySelector("div");gsap.set(t,{xPercent:-50,yPercent:-50}),e.addEventListener("mousemove",r=>{let o=e.getBoundingClientRect(),n=r.clientX-o.left,a=r.clientY-o.top;gsap.to(t,{x:n,y:a,duration:.1})}),e.addEventListener("click",()=>modal.classList.add("open"))}),modal.querySelector("[data-close]").addEventListener("click",()=>modal.classList.remove("open"));const wrapper=document.querySelector(".page__cases__marquee__images"),boxes=gsap.utils.toArray(".page__cases__marquee__images__image");let activeElement,loop;function horizontalLoop(e,t){e=gsap.utils.toArray(e);let r=(t=t||{}).onChange,o=0,n=gsap.timeline({repeat:t.repeat,onUpdate:r&&function(){let t=n.closestIndex();o!==t&&(o=t,r(e[t],t))},paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>n.totalTime(n.rawTime()+10*n.duration())}),a=e.length,s=e[0].offsetLeft,l=[],i=[],d=[],c=[],p=0,u=t.center,g=100*(t.speed||1),$=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1),m=0,f=!0===u?e[0].parentNode:gsap.utils.toArray(u)[0]||e[0].parentNode,v,_=()=>e[a-1].offsetLeft+c[a-1]/100*i[a-1]-s+d[0]+e[a-1].offsetWidth*gsap.getProperty(e[a-1],"scaleX")+(parseFloat(t.paddingRight)||0),E=()=>{let t=f.getBoundingClientRect(),r;e.forEach((e,o)=>{i[o]=parseFloat(gsap.getProperty(e,"width","px")),c[o]=$(parseFloat(gsap.getProperty(e,"x","px"))/i[o]*100+gsap.getProperty(e,"xPercent")),r=e.getBoundingClientRect(),d[o]=r.left-(o?t.right:t.left),t=r}),gsap.set(e,{xPercent:e=>c[e]}),v=_()},L,h=()=>{m=u?n.duration()*(f.offsetWidth/2)/v:0,u&&l.forEach((e,t)=>{l[t]=L(n.labels["label"+t]+n.duration()*i[t]/2/v-m)})},y=(e,t,r)=>{let o=e.length,n=1e10,a=0,s;for(;o--;)(s=Math.abs(e[o]-t))>r/2&&(s=r-s),s<n&&(n=s,a=o);return a},x=()=>{let t,r,o,p,u;for(n.clear(),t=0;t<a;t++)r=e[t],o=c[t]/100*i[t],u=(p=r.offsetLeft+o-s+d[0])+i[t]*gsap.getProperty(r,"scaleX"),n.to(r,{xPercent:$((o-u)/i[t]*100),duration:u/g},0).fromTo(r,{xPercent:$((o-u+v)/i[t]*100)},{xPercent:c[t],duration:(o-u+v-o)/g,immediateRender:!1},u/g).add("label"+t,p/g),l[t]=p/g;L=gsap.utils.wrap(0,n.duration())},b=e=>{let t=n.progress();n.progress(0,!0),E(),e&&x(),h(),e&&n.draggable?n.time(l[p],!0):n.progress(t,!0)},T;function w(e,t){t=t||{},Math.abs(e-p)>a/2&&(e+=e>p?-a:a);let r=gsap.utils.wrap(0,a,e),o=l[r];return o>n.time()!=e>p&&(o+=n.duration()*(e>p?1:-1)),(o<0||o>n.duration())&&(t.modifiers={time:L}),p=r,t.overwrite=!0,gsap.killTweensOf(T),n.tweenTo(o,t)}if(gsap.set(e,{x:0}),E(),x(),h(),window.addEventListener("resize",()=>b(!0)),n.next=e=>w(p+1,e),n.previous=e=>w(p-1,e),n.current=()=>p,n.toIndex=(e,t)=>w(e,t),n.closestIndex=e=>{let t=y(l,n.time(),n.duration());return e&&(p=t),t},n.times=l,n.progress(1,!0).progress(0,!0),t.reversed&&(n.vars.onReverseComplete(),n.reverse()),t.draggable&&"function"==typeof Draggable){T=document.createElement("div");let P=gsap.utils.wrap(0,1),q,C,S,A=()=>n.progress(P(C+(S.startX-S.x)*q)),R=()=>n.closestIndex(!0);"undefined"==typeof InertiaPlugin&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club"),S=Draggable.create(T,{trigger:e[0].parentNode,type:"x",onPressInit(){gsap.killTweensOf(n),C=n.progress(),b(),q=1/v,gsap.set(T,{x:-(C/q)})},onDrag:A,onThrowUpdate:A,inertia:!0,snap(e){let t=-(e*q)*n.duration(),r=L(t),o=l[y(l,r,n.duration())]-r;return Math.abs(o)>n.duration()/2&&(o+=o<0?n.duration():-n.duration()),-((t+o)/n.duration()/q)},onRelease:R,onThrowComplete:R})[0],n.draggable=S}return n.closestIndex(!0),r&&r(e[p],p),n}window.addEventListener("DOMContentLoaded",()=>{loop=horizontalLoop(boxes,{paused:!1,draggable:!0,center:!1,onChange(e,t){activeElement&&activeElement.classList.remove("-active"),e.classList.add("-active"),activeElement=e}});let e=()=>{loop.pause()},t=()=>{loop.play()};wrapper.addEventListener("mouseenter",e),wrapper.addEventListener("mouseleave",t),wrapper.addEventListener("touchstart",e),wrapper.addEventListener("touchend",t)});const exps=document.querySelectorAll("dt");exps.forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.classList.toggle("open"),e.currentTarget.nextElementSibling?.classList.toggle("open")})}),gsap.to("[data-balloon]",{y:"+=200",scrollTrigger:{trigger:".page__features",scrub:!0}});const linesTitle=document.querySelectorAll("[data-title] p");function AnimationTitles(e,t){let r=gsap.utils.toArray(t),o=gsap.timeline({scrollTrigger:{trigger:e,start:"top 80%",end:"bottom 30%",scrub:!0,markers:!1}});r.forEach(e=>{o.to(e,{width:0,duration:1,scrub:!0,ease:"power2.easeIn"})})}linesTitle.forEach(e=>e.innerHTML+="<div></div>"),AnimationTitles("[data-title]","[data-title] div");const btnTop=document.querySelector("[data-top]");btnTop.addEventListener("click",()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0});
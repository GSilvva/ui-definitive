const events=["DOMContentLoaded","scroll","load"];events.forEach(e=>{window.addEventListener(e,()=>{document.querySelectorAll("[data-animate]").forEach(e=>{let t;e.getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)/1.1&&e.classList.add("active")})})});const nav=document.querySelector(".nav");events.forEach(e=>{window.addEventListener(e,()=>{document.body.scrollTop>24||document.documentElement.scrollTop>24?nav.classList.add("fixed"):nav.classList.remove("fixed")})});const buttons=document.querySelectorAll("[data-form]"),modal=document.querySelector(".modal");buttons.forEach(e=>{let t=e.querySelector("div");gsap.set(t,{xPercent:-50,yPercent:-50}),e.addEventListener("mousemove",r=>{let n=e.getBoundingClientRect(),o=r.clientX-n.left,a=r.clientY-n.top;gsap.to(t,{x:o,y:a,duration:.1})}),e.addEventListener("click",()=>modal.classList.add("open"))}),modal.querySelector("[data-close]").addEventListener("click",()=>modal.classList.remove("open"));const wrapper=document.querySelector(".page__cases__marquee__images"),boxes=gsap.utils.toArray(".page__cases__marquee__images__image");let activeElement;function horizontalLoop(e,t){e=gsap.utils.toArray(e);let r=(t=t||{}).onChange,n=0,o=gsap.timeline({repeat:t.repeat,onUpdate:r&&function(){let t=o.closestIndex();n!==t&&(n=t,r(e[t],t))},paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>o.totalTime(o.rawTime()+10*o.duration())}),a=e.length,s=e[0].offsetLeft,l=[],i=[],d=[],c=[],u=0,p=t.center,g=100*(t.speed||1),$=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1),m=0,f=!0===p?e[0].parentNode:gsap.utils.toArray(p)[0]||e[0].parentNode,v,_=()=>e[a-1].offsetLeft+c[a-1]/100*i[a-1]-s+d[0]+e[a-1].offsetWidth*gsap.getProperty(e[a-1],"scaleX")+(parseFloat(t.paddingRight)||0),x=()=>{let t=f.getBoundingClientRect(),r;e.forEach((e,n)=>{i[n]=parseFloat(gsap.getProperty(e,"width","px")),c[n]=$(parseFloat(gsap.getProperty(e,"x","px"))/i[n]*100+gsap.getProperty(e,"xPercent")),r=e.getBoundingClientRect(),d[n]=r.left-(n?t.right:t.left),t=r}),gsap.set(e,{xPercent:e=>c[e]}),v=_()},y,E=()=>{m=p?o.duration()*(f.offsetWidth/2)/v:0,p&&l.forEach((e,t)=>{l[t]=y(o.labels["label"+t]+o.duration()*i[t]/2/v-m)})},b=(e,t,r)=>{let n=e.length,o=1e10,a=0,s;for(;n--;)(s=Math.abs(e[n]-t))>r/2&&(s=r-s),s<o&&(o=s,a=n);return a},h=()=>{let t,r,n,u,p;for(o.clear(),t=0;t<a;t++)r=e[t],n=c[t]/100*i[t],p=(u=r.offsetLeft+n-s+d[0])+i[t]*gsap.getProperty(r,"scaleX"),o.to(r,{xPercent:$((n-p)/i[t]*100),duration:p/g},0).fromTo(r,{xPercent:$((n-p+v)/i[t]*100)},{xPercent:c[t],duration:(n-p+v-n)/g,immediateRender:!1},p/g).add("label"+t,u/g),l[t]=u/g;y=gsap.utils.wrap(0,o.duration())},L=e=>{let t=o.progress();o.progress(0,!0),x(),e&&h(),E(),e&&o.draggable?o.time(l[u],!0):o.progress(t,!0)},T;function w(e,t){t=t||{},Math.abs(e-u)>a/2&&(e+=e>u?-a:a);let r=gsap.utils.wrap(0,a,e),n=l[r];return n>o.time()!=e>u&&(n+=o.duration()*(e>u?1:-1)),(n<0||n>o.duration())&&(t.modifiers={time:y}),u=r,t.overwrite=!0,gsap.killTweensOf(T),o.tweenTo(n,t)}if(gsap.set(e,{x:0}),x(),h(),E(),window.addEventListener("resize",()=>L(!0)),o.next=e=>w(u+1,e),o.previous=e=>w(u-1,e),o.current=()=>u,o.toIndex=(e,t)=>w(e,t),o.closestIndex=e=>{let t=b(l,o.time(),o.duration());return e&&(u=t),t},o.times=l,o.progress(1,!0).progress(0,!0),t.reversed&&(o.vars.onReverseComplete(),o.reverse()),t.draggable&&"function"==typeof Draggable){T=document.createElement("div");let P=gsap.utils.wrap(0,1),q,C,S,A=()=>o.progress(P(C+(S.startX-S.x)*q)),R=()=>o.closestIndex(!0);"undefined"==typeof InertiaPlugin&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club"),S=Draggable.create(T,{trigger:e[0].parentNode,type:"x",onPressInit(){gsap.killTweensOf(o),C=o.progress(),L(),q=1/v,gsap.set(T,{x:-(C/q)})},onDrag:A,onThrowUpdate:A,inertia:!0,snap(e){let t=-(e*q)*o.duration(),r=y(t),n=l[b(l,r,o.duration())]-r;return Math.abs(n)>o.duration()/2&&(n+=n<0?o.duration():-o.duration()),-((t+n)/o.duration()/q)},onRelease:R,onThrowComplete:R})[0],o.draggable=S}return o.closestIndex(!0),r&&r(e[u],u),o}window.addEventListener("DOMContentLoaded",()=>{horizontalLoop(boxes,{paused:!1,draggable:!0,center:!1,onChange(e,t){activeElement&&activeElement.classList.remove("-active"),e.classList.add("-active"),activeElement=e}})});const exps=document.querySelectorAll("dt");exps.forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.classList.toggle("open"),e.currentTarget.nextElementSibling?.classList.toggle("open")})}),gsap.to("[data-balloon]",{y:"+=200",scrollTrigger:{trigger:".page__features",scrub:!0}});const linesTitle=document.querySelectorAll("[data-title] p");function AnimationTitles(e,t){let r=gsap.utils.toArray(t),n=gsap.timeline({scrollTrigger:{trigger:e,start:"top 80%",end:"bottom 30%",scrub:!0,markers:!1}});r.forEach(e=>{n.to(e,{width:0,duration:1,scrub:!0,ease:"power2.easeIn"})})}linesTitle.forEach(e=>e.innerHTML+="<div></div>"),AnimationTitles("[data-title]","[data-title] div");const btnTop=document.querySelector("[data-top]");btnTop.addEventListener("click",()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0});